# MySQL - Ë°®Êìç‰Ωú








<extoc></extoc>

## ‰ªãÁªç  üçÄ

ËØ•ÈÉ®ÂàÜËØ≠Âè•Â±û‰∫éDDLËØ≠Âè• , ÂØπË°®ÁöÑÂÆö‰πâ , ÁªìÊûÑÁöÑ‰øÆÊîπ 

‰∏éDMLËØ≠Âè•ÁöÑÂå∫Âà´Âú®‰∫é , DMLËØ≠Âè•‰ªÖÂØπË°®ÂÜÖÈÉ®Êï∞ÊçÆËøõË°åÊìç‰Ωú , Âç≥Êï∞ÊçÆÁöÑÂ¢ûÂà†ÊîπÊü•

DDLËØ≠Âè•Êõ¥Â§öÂú∞Áî±Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂëò(DBA)‰ΩøÁî® , ÂºÄÂèë‰∫∫Âëò‰∏ÄËà¨ÂæàÂ∞ë‰ΩøÁî®

## ÂàõÂª∫Ë°®  üçÄ

```mysql
-- ÂàõÂª∫Êï∞ÊçÆÂ∫ì
mysql> CREATE DATABASE mydatabase DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
Query OK, 1 row affected (0.00 sec)
-- ‰ΩøÁî®Êï∞ÊçÆÂ∫ì
mysql> USE mydatabase;
Database changed
-- ÂàõÂª∫Ë°®tb
mysql> CREATE TABLE tb(
    -> id int(5) NOT NULL AUTO_INCREMENT,
    -> name char(15) NOT NULL,
    -> alias varchar(10) DEFAULT NULL,
    -> email varchar(30) DEFAULT NULL,
    -> password varchar(20) NOT NULL,
    -> phone char(11) DEFAULT '00000000000',
    -> PRIMARY KEY(id,name)
    -> )ENGINE=InnoDB DEFAULT CHARSET=utf8;
Query OK, 0 rows affected (0.24 sec)
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC tb;
+----------+-------------+------+-----+-------------+----------------+
| Field    | Type        | Null | Key | Default     | Extra          |
+----------+-------------+------+-----+-------------+----------------+
| id       | int(5)      | NO   | PRI | NULL        | auto_increment |
| name     | char(15)    | NO   | PRI | NULL        |                |
| alias    | varchar(10) | YES  |     | NULL        |                |
| email    | varchar(30) | YES  |     | NULL        |                |
| password | varchar(20) | NO   |     | NULL        |                |
| phone    | char(11)    | YES  |     | 00000000000 |                |
+----------+-------------+------+-----+-------------+----------------+
6 rows in set (0.00 sec)
-- Êü•ÁúãË°®ËØ¶ÁªÜÂÆö‰πâ,\GÁöÑÂê´‰πâÊòØ‰ΩøËÆ∞ÂΩïÊåâÁÖßÂ≠óÊÆµÁ´ñÂêëÊéíÂàó
mysql> SHOW CREATE TABLE tb \G;
*************************** 1. row ***************************
       Table: tb
Create Table: CREATE TABLE `tb` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `name` char(15) NOT NULL,
  `alias` varchar(10) DEFAULT NULL,
  `email` varchar(30) DEFAULT NULL,
  `password` varchar(20) NOT NULL,
  `phone` char(11) DEFAULT '00000000000',
  PRIMARY KEY (`id`,`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec)
ERROR:
No query specified
```


## Âà†Èô§Ë°®  üçÄ

```mysql
mysql> DROP TABLE tb;
Query OK, 0 rows affected (0.21 sec)
```


## ‰øÆÊîπË°®  üçÄ

### ‰øÆÊîπË°®Á±ªÂûã  üçÄ

ËØ≠Ê≥ï : 

```mysql
ALTER TABLE tablename MODIFY [COLUMN] column_name column_type [FIRST|AFTER col_name]; -- [...]Ë°®Á§∫‰∏≠Èó¥ÁöÑÂèØ‰ª•ÁúÅÁï•‰∏çÂÜô
```

ÂÆû‰æã

```mysql
-- ÂàõÂª∫empË°®
mysql> CREATE TABLE emp(
    -> ename VARCHAR(10),
    -> hiredate DATE,
    -> sal DECIMAL(10,2),
    -> deptno INT(2)
    -> )ENGINE=InnoDB DEFAULT CHARSET=utf8;
Query OK, 0 rows affected (0.27 sec)
-- ‰øÆÊîπempË°®‰∏≠enameÂ≠óÊÆµÁöÑÁ±ªÂûã
mysql> ALTER TABLE emp MODIFY ename varchar(20);
Query OK, 0 rows affected (0.08 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| sal      | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
```


### Â¢ûÂä†Ë°®Â≠óÊÆµ  üçÄ

ËØ≠Ê≥ï : 

```mysql
ALTER TABLE tablename ADD [COLUMN] column_name column_type [FIRST|AFTER col_name];
ALTER TABLE tablename ADD PRIMARY KEY(column_name);
ALTER TABLE slave_table ADD CONSTRAINT symbol(Â¶Ç:FK_slave_primary) FOREIGN KEY slave_table(foreign_name) REFERENCES primary_table(primary_name);
```

ÂÆû‰æã : 

```mysql
-- Â¢ûÂä†ageÂ≠óÊÆµ
mysql> ALTER TABLE emp ADD age int(3);
Query OK, 0 rows affected (0.63 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Â¢ûÂä†idÂ≠óÊÆµ
mysql> ALTER TABLE emp ADD id int(5);
Query OK, 0 rows affected (0.53 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Â∞ÜidÂ≠óÊÆµËÆæÁΩÆ‰∏∫‰∏ªÈîÆ
mysql> ALTER TABLE emp ADD PRIMARY KEY(id);
Query OK, 0 rows affected (0.41 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| sal      | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| age      | int(3)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   | PRI | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
```


### Âà†Èô§Ë°®Â≠óÊÆµ  üçÄ

ËØ≠Ê≥ï : 

```mysql
ALTER TABLE tablename DROP [COLUMN] column_name;
ALTER TABLE DROP FOREIGN KEY foreign_key_name;
ALTER TABLE DROP PRIMARY KEY;
```

ÂÆû‰æã : 

```mysql
-- Âà†Èô§ageÂ≠óÊÆµ
mysql> ALTER TABLE emp DROP age;
Query OK, 0 rows affected (0.42 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Âà†Èô§‰∏ªÈîÆ
mysql> ALTER TABLE emp DROP PRIMARY KEY;
Query OK, 0 rows affected (0.62 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| sal      | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
```


### Â≠óÊÆµÊîπÂêç  üçÄ

ËØ≠Ê≥ï : 

```mysql
ALTER TABLE tablename CHANGE [COLUMN] old_col_name new_col_name column_type [FIRST|AFTER col_name];
```

ÂÆû‰æã : 

```mysql
-- Â∞ÜsalÂ≠óÊÆµ‰øÆÊîπ‰∏∫salary
mysql> ALTER TABLE emp CHANGE sal salary decimal(10,2);
Query OK, 0 rows affected (0.09 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
```

PS : change Âíå modifyÈÉΩÂèØ‰ª•‰øÆÊîπË°®Á±ªÂûã , ‰∏çÂêåÁöÑÊòØchangeÂêéÈù¢ÈúÄË¶ÅÂÜô‰∏§Ê¨°ÂàóÂêç ; Âπ∂‰∏îchangeÂèØ‰ª•‰øÆÊîπÂàóÂêç , modifyÂàô‰∏çËÉΩ


### ‰øÆÊîπÂ≠óÊÆµÊéíÂàóÈ°∫Â∫è  üçÄ

ÂâçÈù¢‰ªãÁªçÁöÑÂ≠óÊÆµÂ¢ûÂä†Âíå‰øÆÊîπËØ≠Ê≥ï(ADD/CHANGE/MODIFY)‰∏≠, ÈÉΩÊúâ‰∏Ä‰∏™ÂèØÈÄâÈ°π `[FIRST|AFTER col_name]` ,Ëøô‰∏™ÈÄâÈ°πÂèØ‰ª•Áî®Êù•‰øÆÊîπÂ≠óÊÆµÂú®Ë°®‰∏≠ÁöÑ‰ΩçÁΩÆ , ADDÂ¢ûÂä†ÁöÑÊñ∞Â≠óÊÆµÈªòËÆ§ÊòØÂä†Âú®Ë°®ÁöÑÊúÄÂêé‰ΩçÁΩÆ , ËÄåCHANGE/MODIFYÈªòËÆ§ÈÉΩ‰∏ç‰ºöÊîπÂèòÂ≠óÊÆµÁöÑ‰ΩçÁΩÆ

Â∞ÜÊñ∞Â¢ûÁöÑÂ≠óÊÆµbirth dateÂä†Âú®ename‰πãÂêé

```mysql
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
-- Êñ∞Â¢ûbirth dateÂ≠óÊÆµÂú®ename‰πãÂêé
mysql> ALTER TABLE emp ADD birth date AFTER ename;
Query OK, 0 rows affected (0.45 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| ename    | varchar(20)   | YES  |     | NULL    |       |
| birth    | date          | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
```

‰øÆÊîπsalaryÂ≠óÊÆµ , Â∞ÜÂÆÉÊîæÂú®ÊúÄÂâçÈù¢

```mysql
mysql> ALTER TABLE emp MODIFY salary DECIMAL(10,2) FIRST;
Query OK, 0 rows affected (0.55 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| ename    | varchar(20)   | YES  |     | NULL    |       |
| birth    | date          | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
```

**PS :** CHANGE/FIRST|AFTER COLUMN Ëøô‰∫õÂÖ≥ÈîÆÂ≠óÈÉΩÂ±û‰∫éMySQLÂú®Ê†áÂáÜSQL‰∏äÁöÑÊâ©Â±ï , Âú®ÂÖ∂‰ªñÊï∞ÊçÆÂ∫ì‰∏ä‰∏ç‰∏ÄÂÆöÈÄÇÁî®


### Êõ¥ÊîπË°®Âêç  üçÄ

ËØ≠Ê≥ï : 

```mysql
ALTER TABLE tablename RENAME [TO] new_tablename;
```

ÂÆû‰æã : 

```mysql
mysql> ALTER TABLE emp RENAME emp1;
Query OK, 0 rows affected (0.16 sec)
-- Ë°®ÊòéÊîπÂèò
mysql> DESC emp1;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| ename    | varchar(20)   | YES  |     | NULL    |       |
| birth    | date          | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
```


### ÈªòËÆ§ÂÄº  üçÄ

ËØ≠Ê≥ï : 

```mysql
-- ‰øÆÊîπÈªòËÆ§ÂÄº
ALTER TABLE tablename ALTER field_name SET DEFAULT v;
-- Âà†Èô§ÈªòËÆ§ÂÄº
ALTER TABLE tablename ALTER field_name DROP DEFAULT;
```

ÂÆû‰æã : 

```mysql
-- Â∞ÜsalaryÂ≠óÊÆµÈªòËÆ§ÂÄº‰øÆÊîπ‰∏∫2000
mysql> ALTER TABLE emp1 ALTER salary SET DEFAULT 2000;
Query OK, 0 rows affected (0.12 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp1;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| salary   | decimal(10,2) | YES  |     | 2000.00 |       |
| ename    | varchar(20)   | YES  |     | NULL    |       |
| birth    | date          | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
-- Âà†Èô§salaryÁöÑÈªòËÆ§ÂÄº
mysql> ALTER TABLE emp1 ALTER salary DROP DEFAULT;
Query OK, 0 rows affected (0.09 sec)
Records: 0  Duplicates: 0  Warnings: 0
-- Êü•ÁúãË°®ÂÆö‰πâ
mysql> DESC emp1;
+----------+---------------+------+-----+---------+-------+
| Field    | Type          | Null | Key | Default | Extra |
+----------+---------------+------+-----+---------+-------+
| salary   | decimal(10,2) | YES  |     | NULL    |       |
| ename    | varchar(20)   | YES  |     | NULL    |       |
| birth    | date          | YES  |     | NULL    |       |
| hiredate | date          | YES  |     | NULL    |       |
| deptno   | int(2)        | YES  |     | NULL    |       |
| id       | int(5)        | NO   |     | NULL    |       |
+----------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)
```


## ËØ≠Âè•ÂêàÈõÜ  üçÄ

> ÂàõÂª∫Ë°®

```mysql
/* ÊòØÂê¶ÂèØÁ©∫ */
CREATE TABLE tablename(
	column_name type NULL,     /* ÂàóÂêç,Á±ªÂûã,ÂèØ‰∏∫Á©∫ */
	column_name type NOT NULL  /* ÂàóÂêç,Á±ªÂûã,‰∏çÂèØ‰∏∫Á©∫ */
)ENGINE=InnoDB DEFAULT CHARSET=utf8
/* ÈªòËÆ§ÂÄº */
CREATE TABLE tablename(
	column_name type DEFAULT NULL ,   	  /* ÂàóÂêç,Á±ªÂûã,ÈªòËÆ§‰∏∫Á©∫ */
  „ÄÄcolumn_name type NOT NULL DEFAULT 2   /* ÂàóÂêç,Á±ªÂûã,ÈªòËÆ§‰∏∫Á©∫ */
)ENGINE=InnoDB DEFAULT CHARSET=utf8
/* Ëá™Â¢û */
CREATE TABLE tablename(
    column_name type NOT NULL auto_increment PRIMARY KEY,
)ENGINE=InnoDB DEFAULT CHARSET=utf8
Êàñ
CREATE TABLE tablename(
    column_name type NOT NULL auto_increment,
    INDEX(column_name)
)ENGINE=InnoDB DEFAULT CHARSET=utf8
    ÂØπ‰∫éËá™Â¢ûÂàó,ÂøÖÈ°ªÊòØÁ¥¢Âºï(Âê´‰∏ªÈîÆ)
    ÂØπ‰∫éËá™Â¢ûÂèØ‰ª•ËÆæÁΩÆÊ≠•ÈïøÂíåËµ∑ÂßãÂÄº
        SHOW SESSION VARIABLES LIKE 'auto_inc%';
        SET SESSION auto_increment_increment=2;
        SET SESSION auto_increment_offset=10;
        SHOW GLOBAL VARIABLES LIKE 'auto_inc%';
        SET GLOBAL auto_increment_increment=2;
        SET GLOBAL auto_increment_offset=10;
/* ‰∏ªÈîÆ */
‰∏ªÈîÆ,‰∏ÄÁßçÁâπÊÆäÁöÑÂîØ‰∏ÄÁ¥¢Âºï,‰∏çÂÖÅËÆ∏ÊúâÁ©∫ÂÄº,Â¶ÇÊûú‰∏ªÈîÆ‰ΩøÁî®Âçï‰∏™Âàó,ÂàôÂÆÉÁöÑÂÄºÂøÖÈ°ªÂîØ‰∏Ä,Â¶ÇÊûúÊòØÂ§öÂàó,ÂàôÂÖ∂ÁªÑÂêàÂøÖÈ°ªÂîØ‰∏Ä
CREATE TABLE tablename(
	column_name type NOT NULL auto_increment PRIMARY KEY,
)
Êàñ
CREATE TABLE tablename(
	column_name type NOT NULL,
	PRIMARY KEY(column_name)
)
/* Â§ñÈîÆ */
CREATE TABLE tablename(
	CONSTRAINT symbol FOREIGN KEY (id) REFERENCES table_child(id);
)
```

> Âà†Èô§Ë°®

```mysql
DROP TABLE tablename;
```

> Ê∏ÖÁ©∫Ë°®

```mysql
-- Â¶ÇÊûúÊ∏ÖÁ©∫ÁöÑË°®ÂèàËá™Â¢ûÂàó,ÈÇ£‰πàÂú®Ê∏ÖÁ©∫‰πãÂêé‰ºöÁªßÁª≠‰∏äÊ¨°Ëá™Â¢ûÁöÑÂÄºÁªßÁª≠Ëá™Â¢û
DELETE FROM tablename;
-- Â¶ÇÊûúÊ∏ÖÁ©∫ÁöÑË°®ÂèàËá™Â¢ûÂàó,ÈÇ£‰πàÂú®Ê∏ÖÁ©∫‰πãÂêéÂÜçÊ¨°Ê∑ªÂä†Êï∞ÊçÆËá™Â¢ûÁöÑÂÄº‰ºö‰ªéÊñ∞ÂºÄÂßãËÆ°ÁÆó
TRUNCATE TABLE tablename;
```

> ‰øÆÊîπË°®

```mysql
-- Ê∑ªÂä†Âàó
ALTER TABLE tablename ADD column_name column_type
-- Âà†Èô§Âàó
ALTER TABLE tablename DROP COLUMN column_name
-- ‰øÆÊîπÂàó
ALTER TABLE tablename MODIFY COLUMN column_name column_type;  -- ‰øÆÊîπÁ±ªÂûã
ALTER TABLE tablename CHANGE originalname newname column_type; -- ‰øÆÊîπÂàóÂêç‰∏éÁ±ªÂûã
-- Ê∑ªÂä†‰∏ªÈîÆ
ALTER TABLE tablename ADD PRIMARY KEY(columnname);
-- Âà†Èô§‰∏ªÈîÆ
ALTER TABLE tablename DROP PRIMARY KEY;
ALTER TABLE tablename  MODIFY columnname INT, DROP PRIMARY KEY;
-- Ê∑ªÂä†Â§ñÈîÆ
ALTER TABLE slave_table ADD CONSTRAINT symbol(ex:FK_slave_primary) FOREIGN KEY slave_table(foreign_key_field) REFERENCES primary_table(primary_field);
-- Âà†Èô§Â§ñÈîÆ
ALTER TABLE tablename DROP FOREIGN KEY foreign_key_field
-- ‰øÆÊîπÈªòËÆ§ÂÄº
ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;
-- Âà†Èô§ÈªòËÆ§ÂÄº
ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;
```

