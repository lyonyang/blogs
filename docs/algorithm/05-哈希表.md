本文为 `《91 天学算法》` 中的讲义, 因为是非开源项目, 所以这里无法给出链接, 作者 [lucifer](https://lucifer.ren/blog/2020/05/23/91-algo/) 

后期本人会重写, 暂时引用, 特此声明

# 哈希表

### 介绍

- 定义：散列表（Hash table，也叫哈希表），是根据关键码值(Key)而直接进行访问的数据结构。散列表可以使用数组 + 链表的方式来实现。
- 哈希函数：哈希表查找过程是根据Key来算出hashcode（通常是一个数字），根据这个数字来随机访问数组，而理论上两个不同的key是可以算出同样的hashcode的。这个就叫做哈希冲突。
- 哈希冲突：hash函数不是万能的，这样不可避免的可能会造成两个不同的Key算出来的hash值相同，比如hash函数是x % 3，这样key=2和key=5算出的hash值都为2，这是要怎么办呢？一般我们有两种方法来处理，开放地址法和拉链法，具体大家可以查阅相关资料。这里简单的画了个图给大家直观看一下大概意思：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1gfatsgoiutj30n60hzjtr.jpg)

> 最后偷偷说一下，用Java的同学有兴趣可以看看HashSet的源码，底层也是用的HashMap😄
- 哈希表的性能：构造一个冲突小，稳定性高的hash函数是很重要的，我们在刷题的时候大部分时间都不会去考虑这个问题，但是实际工程中有时不可避免需要我们自己构造hash函数，这时就要根据实际情况进行分析测试啦。












<extoc></extoc>

## 刷题技巧

### 常用操作的时间复杂度

- 插入：O(1)
- 删除：O(1)
- 查找：O(1)

是的，常用的操作在非极其特殊情况下，平均的时间复杂度都为**O(1)**

### 常见的题类型如下：

- **统计xx出现次数/频率/** （见下方多人运动）

           该种题比较直观，若已知数据范围较小且比较连续，可以考虑用数组来实现

- **需要查找/增加/删除操作为O(1)时间复杂度** （一些设计题）

           见到这种要求的题可以考虑一下是否需要hash表来做，比如LRU，LFU之类的题，题目中要求了时间复杂度，就是用hash表+双向链表解决的。

- **题目类型为图数据结构相关** （比如并查集）

           这样可能需要构建有向图/无向图，这时可以用hash表来表示图并进行后续操作。

- **需要存储之前的状态以减少计算开销**（比如经典的两数和）

           相信大家做过dp的一些题目就知道，记忆化搜索，该方法就利用hash表来存储历史状态，这样可以大大减少重复计算。

- **等等，大家多做类似的题目，相信可以总结出一套自己的思路。**

### 模板（伪代码）

- 判断目标值是否出现过（例题如：两数之和、是否存在重复元素、合法数独等等）

```python
for num in nums:
    if num(该处为目标值target) in hashtable:
	return true
return false
```

- 统计频率

数据比较离散

```python
for num in nums:
    if num in hashtable:
	hashtable[num] += 1
    else
	hashtable[num] = 1
# 后续操作
-------------------
```

数据范围较小且连续则可以用数组代替

```java
// 假设数据范围是0-n且n较小
int[] hashtable = new int[n + 1];

for num in nums:
    hashtable[num] += 1;

// 后续操作
------------------
```

### 题目推荐 - 👥多人运动

#### 题目描述
已知小猪每晚都要约好几个女生到酒店房间。每个女生 i 与小猪约好的时间由 [si , ei］表示，其中 si 表示女生进入房间的时间， ei 表示女生离开房间的时间。由于小猪心胸开阔，思想开明，不同女生可以同时存在于小猪的房间。请计算出小猪最多同时在做几人的「多人运动」。


例子：

Input ： [[ 0 , 30] ,[ 5 , 10 ] ， [15 , 20 ] ]

OutPut ：最多同时有两个女生的「三人运动」

#### 思路

这个题 解法不止一种，但是我们这里因为在讲hash表，统计频率。下面我只写一下大致思路的伪代码，具体细节大家不妨可以尝试自己实现一下。

```java
// 上面刚刚说了关于频率统计的方法，这里读完题，是不是就立刻想到了：
// 用hash表来统计每个时刻房间内的人数并维护一个最大值就是我们所求的结果啦

res = -1

for everyGirl in girls:
    for curTime in [everyGirl.start, everyGirl.end]:
	// 套上面板子
	if curTime in hashtable:
	    hashtable[curTime] += 1
	else
	    hashtable[curTime] = 1

	// 维护最大值
	res = max(res, hashtable[curTime])

----------------------------
```

线下验证通过可以贴到这里哦

**[【每日一题】- 2020-04-27 - 多人运动](https://github.com/azl397985856/leetcode/issues/347)**

这里还有各种解题方法，大家都可以学习下思路并试着自己做一做！
