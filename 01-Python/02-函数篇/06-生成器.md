#  Attack on Python - ç”Ÿæˆå™¨ ğŸ




<extoc></extoc>

## ä»‹ç»

ç”Ÿæˆå™¨ , åˆç§°ä¸º "åŠåç¨‹" , å®ƒä¸è¿­ä»£å™¨ , åç¨‹éƒ½æœ‰ç€äº²å¯†çš„å…³ç³»

## ç”Ÿæˆå™¨

ç”Ÿæˆå™¨éå¸¸ç±»ä¼¼äºè¿”å›æ•°ç»„çš„å‡½æ•° , éƒ½æ˜¯å…·æœ‰å‚æ•°ã€å¯è¢«è°ƒç”¨ã€äº§ç”Ÿä¸€ç³»åˆ—çš„å€¼ , ä½†æ˜¯ç”Ÿæˆå™¨ä¸æ˜¯æ„é€ å‡ºæ•°ç»„åŒ…å«æ‰€æœ‰çš„å€¼å¹¶ä¸€æ¬¡æ€§è¿”å› , è€Œæ˜¯æ¯æ¬¡äº§ç”Ÿä¸€ä¸ªå€¼ , å› æ­¤ç”Ÿæˆå™¨çœ‹èµ·æ¥åƒå‡½æ•° , ä½†è¡Œä¸ºåƒè¿­ä»£å™¨

å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç”Ÿæˆå™¨è¿›è¡Œæƒ°æ€§æ±‚å€¼ , ä¸æå‰å­˜å‚¨ , æ¯æ¬¡éƒ½æ˜¯é€šè¿‡è®¡ç®—

åœ¨ `Python` ä¸­ , ç”Ÿæˆå™¨æ˜¯ç”¨æ¥å®ç°è¿­ä»£å™¨çš„ , æ‰€ä»¥ç”Ÿæˆå™¨å®é™…ä¸Šæ˜¯è¿­ä»£å™¨çš„æ„é€ å™¨

è™½ç„¶è¿­ä»£å™¨æ˜¯ç”±ç”Ÿæˆå™¨æ„é€  , ä½†æ˜¯ç”Ÿæˆå™¨åŒæ ·æ˜¯å¯è¿­ä»£å¯¹è±¡ , è‡ªç„¶ç”Ÿæˆå™¨ä¹Ÿå¯ä»¥ç®—æ˜¯è¿­ä»£å™¨ , è‡³å°‘åœ¨ `Python` ä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥åˆ¤æ–­

```python
from collections import Iterator
print(isinstance((i for i in range(10)), Iterator))
```

## ç”Ÿæˆå™¨å‡½æ•° 

ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ , é‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±å«åšç”Ÿæˆå™¨å‡½æ•°

åˆ©ç”¨ç”Ÿæˆå™¨åšä¸€ä¸ªrange( 2.xä¸­çš„xrange ) çš„åŠŸèƒ½

```python
# å®šä¹‰ç”Ÿæˆå™¨
>>> def range(n):
...		start = 0
... 	while start < n:
... 		yield start
...			start += 1
>>> obj = range(5)
>>> obj.__next__()
>>> obj.__next__()
>>> obj.__next__()
>>> obj.__next__()
>>> obj.__next__()

# ä¹Ÿå¯ä»¥ä½¿ç”¨()å®šä¹‰ç”Ÿæˆå™¨
range = (i for i in range(5))
```

`yield` çš„ä½œç”¨ :  `yield` çš„ä½œç”¨æ˜¯ä¸­æ–­å‡½æ•°çš„æ‰§è¡Œå¹¶è®°å½•ä¸­æ–­çš„ä½ç½® , ç­‰ä¸‹æ¬¡é‡æ–°è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ , å°±ä¼šæ¥ç€ä¸Šæ¬¡ç»§ç»­æ‰§è¡Œ

PS : è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ , ä»…ä»…ä¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ , å¹¶ä¸ä¼šæ‰§è¡Œå‡½æ•°çš„å†…å®¹ , ç”Ÿæˆå™¨åªèƒ½ç”± `next()`  è¿›è¡Œè°ƒç”¨æ‰§è¡Œ , å®è´¨ä¸Š`next()` æ–¹æ³•å°±æ˜¯è°ƒç”¨çš„` __next__() `  æ–¹æ³•

**yield from**

```python
def func1():
    for i in 'AB':
        yield i
    for j in range(3):
        yield j
print(list(func()))

def func2():
    yield from 'AB'
    yield from range(3)
    
print(list(func2()))
```

é™¤äº†é€šè¿‡ `yield` å’Œ `yield from` è¯­å¥ , æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç”Ÿæˆå™¨è¡¨è¾¾å¼æ¥å®šä¹‰ , ä¹Ÿå°±æ˜¯ `(i for i in range(10))` è¿™ç§æ–¹å¼ , è€Œå…¶ä»–çš„æ¨å¯¼å¼åˆ™æ˜¯ä½¿ç”¨ `()` ä¹‹å¤–çš„å®šä¹‰ 

```python
# åˆ—è¡¨æ¨å¯¼å¼
l = [i for i in range(10)]
# å­—å…¸æ¨å¯¼å¼
d = {i:i for i in range(10)}
# é›†åˆæ¨å¯¼å¼
s = {i for i in range(10)}
```

## åº”ç”¨

ç›‘å¬æ–‡ä»¶

```python
import time
def tail(filename):
    # æ‰“å¼€æ–‡ä»¶
    f = open(filename,encoding='utf-8')
    # ä»æ–‡ä»¶æœ«å°¾ç®—èµ·
    f.seek(0, 2) 
    while True:
        # è¯»å–æ–‡ä»¶ä¸­æ–°çš„æ–‡æœ¬è¡Œ
        line = f.readline()  
        if not line:
            time.sleep(0.1)
            continue
        yield line
tail_g = tail('tmp')
# ç”Ÿæˆå™¨ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡
for line in tail_g:
    print(line)
```

è®¡ç®—åŠ¨æ€å¹³å‡å€¼

```python
def averager():
	total = 0
    count = 0
    average = None
    while True:
        term = yield average
        total += term
        count += 1
        average = total/count
# ç”Ÿæˆç”Ÿæˆå™¨
g_avg = averager()
# æ¿€æ´»ç”Ÿæˆå™¨,ä¸æ¿€æ´»æ— æ³•send
next(g_avg)
# sendç›¸å½“äºå…ˆä¼ å‚,åè°ƒç”¨next()
print(g_avg.send(10))
print(g_avg.send(30))
print(g_avg.send(50))
```

å½“ç„¶åœ¨æˆ‘ä»¬å·¥ä½œä¸­æ›´å¤šçš„æ˜¯åˆ©ç”¨ç”Ÿæˆå™¨æ¥å®ç°æƒ°æ€§è®¡ç®—
