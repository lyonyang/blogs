# Docker

## 介绍

Docker 是一个开源的应用容器引擎 , 基于 Go 语言 并遵从 Apache2.0 协议开源

Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中 , 然后发布到任何流行的 Linux 机器上 , 也可以实现虚拟化

## 功能和组件

Docker 的实现引入了以下核心概念 : 

- Docker 客户端
- Docker daemon
- Docker 容器
- Docker 镜像
- Registry

## Docker客户端

Docker 是一个典型的 C/S 架构的应用程序 , 但在发布上 , Docker 将客户端和服务器端统一在同一个二进制文件中 , 不过 , 这只是对于 Linux 系统而言的 , 在其他平台如 Mac 上 , Docker 只提供了客户端

Docker 客户端一般通过 Docker command 来发起清楚 , 另外 , 也可以通过 Docker 提供的一整套 RESTful API 来发起请求 , 这种方式更多地被应用在应用程序的代码中

## Docker daemon

Docker daemon 也可以被理解为 Docker Server , 另外 , 人们也常常用 Docker Engine 来直接描述它 , 因为这实际上就是驱动整个 Docker 功能的核心引擎

简单地说 , Docker daemon 实现的功能就是接收客户端发来的请求 , 并实现请求所要求的功能 , 同时针对请求返回响应的结果 , 在功能的实现上 , 因为涉及了容器 , 镜像 , 存储等多方便的内容 , daemon 内部的机制会复杂很多 , 涉及了多个模块的实现和交互

## Docker容器

在 Docker 的功能和概念中 , 容器是一个核心内容 , 相对于传统虚拟化 , 它作为一项基础技术在性能上给 Docker 带来了极大优势

在概念上 , 容器很好地诠释了 Docker 集装箱的理念 , 集装箱可以存放任何货物 , 可以通过邮轮将货物运输到世界各地 , 运输集装箱的邮轮和装载卸载集装箱的码头都不用关心集装箱里的货物 , 这是一种标准的集装和运输方式 ; 类似的 , Docker 的容器就是 "软件界的集装箱" , 它可以安装任意的软件和库文件 , 做任意的运行环境配置 , 开发及运维人员在转义和部署应用的时候 , 不用关心容器里装了什么软件 , 也不用了解它们是如何配置的 , 而管理容器的 Docker 引擎同样不关心容器里的内容 , 它只要像码头工人一样让这个容器运行起来就可以了 , 就像所有其他容器那样

## Docker镜像

与容器相对应 , 如果说容器提供了一个完整的 , 隔离的运行环境 , 那么镜像则是这个运行环境的静态体现 , 是一个还没有运行起来的 "运行环境"

相对传统虚拟化中的 ISO 镜像 , Docker 镜像要轻量化很多 , 它只是一个可定制的 rootfs , Docker 镜像的另一个创新是它是层级的并且是可服用的

Docker 镜像通常是通过 Dockerfile 来创建的 , Dockerfile 提供了镜像内容的定制 , 同时也体现了层级关系的建立 , 另外 Docker 镜像也可以通过使用 docker commit 这样的命令来手动将修改后的内容生成镜像

## Registry

Registry 是一个存放镜像的仓库 , 它通常被部署在互联网服务或者云端 , 通常 , 集装箱是需要通过邮轮经行海洋运输到世界各地的 , 而互联网时代的传输则要方便很多 , 在镜像的传输过程中 , Registry 就是这个传输的重要中转站 ;  假如我们在公司将一个软件的运行环境作成镜像 , 并上传到 Registry 中 , 这时就可以很方便地在家里的笔记本上 , 或者在客户的生产环境上直接从 Registry 上下载并运行了

## 比较

跟传统VM比较 , Docker 具有如下优点 : 

1. 操作启动快 , 运行时的性能可以获取极大提升 , 管理操作(启动 , 停止 , 开始 , 重启等等) 都是以秒或毫秒为单位的
2. 轻量级虚拟化 , 你会拥有足够的“操作系统” , 仅需添加或减小镜像即可
3. 开源免费 , 开源的 , 免费的 , 低成本的 , 由现代Linux内核支持并驱动
4. 前景及云支持

跟传统VM比较 , Docker 具有如下缺点 : 

1. 它是一项新型的技术 , 可能还不够稳定
2. Go 语言还没有完全成熟
