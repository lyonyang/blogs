# Pythonä¹‹è·¯ - Djangoåˆè¯†

## ä»‹ç»  ğŸ€

é€šè¿‡ä¸Šä¸€ç¯‡æ•´ç† , å¯¹äºWebæ¡†æ¶åº”è¯¥æ¸…æ™°äº†å¾ˆå¤š , å½“ç„¶ä¸Šä¸€ç¯‡ä»…ä»…æ˜¯è‡ªå®šä¹‰äº†ä¸€ä¸ªæœ€low , æœ€åº•ç«¯çš„Webæ¡†æ¶ , åŸºæœ¬ä»…èƒ½å¤„ç†ç‰¹å®šçš„HTTPè¯·æ±‚ , é‚£ä¹ˆè¿™ä¸€ç« å°±å¼€å§‹å­¦ä¹ Python Webæ¡†æ¶ä¸­çš„ç‹ç‰Œâ€”â€”Django

Djangoæœ¬èº«é›†æˆäº†ORM , æ¨¡å‹ç»‘å®š , æ¨¡æ¿å¼•æ“ , ç¼“å­˜ , Sessionç­‰è¯¸å¤šåŠŸèƒ½

Djangoæ˜¯ä¸€ä¸ªåŸºäºMVCæ¨¡å¼æ„é€ çš„æ¡†æ¶ , ä½†æ˜¯åœ¨Djangoä¸­ , æ§åˆ¶å™¨æ¥å—ç”¨æˆ·è¾“å…¥çš„éƒ¨åˆ†ç”±æ¡†æ¶è‡ªè¡Œå¤„ç† , æ‰€ä»¥ Django é‡Œæ›´å…³æ³¨çš„æ˜¯æ¨¡å‹ (Model)  , æ¨¡æ¿ (Template) å’Œè§†å›¾ (Views) , å³MTVæ¨¡å¼ , å®ƒä»¬å„è‡ªçš„èŒè´£å¦‚ä¸‹

| å±‚æ¬¡                     | èŒè´£                                       |
| ---------------------- | ---------------------------------------- |
| æ¨¡å‹ (Model) , å³æ•°æ®å­˜å–å±‚    | å¤„ç†ä¸æ•°æ®ç›¸å…³çš„æ‰€æœ‰äº‹åŠ¡ :  å¦‚ä½•å­˜å–ã€å¦‚ä½•éªŒè¯æœ‰æ•ˆæ€§ã€åŒ…å«å“ªäº›è¡Œä¸ºä»¥åŠæ•°æ®ä¹‹é—´çš„å…³ç³»ç­‰ |
| è§†å›¾ (View) , å³è¡¨ç°å±‚       | å¤„ç†ä¸è¡¨ç°ç›¸å…³çš„å†³å®š :  å¦‚ä½•åœ¨é¡µé¢æˆ–å…¶ä»–ç±»å‹æ–‡æ¡£ä¸­è¿›è¡Œæ˜¾ç¤º          |
| æ¨¡æ¿ (Template) , å³ä¸šåŠ¡é€»è¾‘å±‚ | å­˜å–æ¨¡å‹åŠè°ƒå–æ°å½“æ¨¡æ¿çš„ç›¸å…³é€»è¾‘ , æ¨¡å‹ä¸æ¨¡æ¿çš„æ¡¥æ¢              |

**å®‰è£…**

```cmd
$pip install django
```

**è·å–ç‰ˆæœ¬**

```python
>>> import django
>>> django.get_version()
'1.10.8'
```

**æ·»åŠ ç¯å¢ƒå˜é‡**

```
C:\Python3.5\Scripts  - å…·ä½“è·¯å¾„è‡ªè¡Œæ·»åŠ 
```

## åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®  ğŸ€

æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œæ¥è¿›è¡Œåˆ›å»º , å‘½ä»¤å¦‚ä¸‹

```cmd
django-admin startproject mysite  - å½“å‰ç›®å½•ä¸‹åˆ›å»º
# IDEåˆ›å»ºDjangoç¨‹åºæ—¶æœ¬è´¨ä¸Šéƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œäº†è¯¥å‘½ä»¤
```

åˆ›å»ºæˆåŠŸåå¯è§

```python
mysite
â”œâ”€â”€ mysite             # å¯¹æ•´ä¸ªç¨‹åºè¿›è¡Œé…ç½®
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ urls.py        # URLå¯¹åº”å…³ç³»
â”‚   â””â”€â”€ wsgi.py        # ä¸€ä¸ªWSGIå…¼å®¹çš„WebæœåŠ¡å™¨å…¥å£,ä»¥ä¾¿è¿è¡Œä½ çš„é¡¹ç›®,ä¸Šçº¿uwsgi + nginx
â”œâ”€â”€ db.sqlite3         # é»˜è®¤ä½¿ç”¨sqlite
â””â”€â”€ manage.py          # ç”¨æˆ·ç®¡ç†Djangoçš„å·¥å…·
```

**PS : å¦‚æœæˆ‘ä»¬ä½¿ç”¨`Pycharm` æ¥å®Œæˆè¿™é¡¹æ“ä½œ , é‚£ä¹ˆå…¶è¿˜ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª`templates` æ–‡ä»¶å¤¹ , ç”¨äºå­˜æ”¾æ¨¡æ¿** 

## å¯åŠ¨Djangoé¡¹ç›®  ğŸ€

åˆ›å»ºå®Œæˆåæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨Djangoé¡¹ç›®äº†

```python
python manage.py runserver 0.0.0.0:8000
'''
0.0.0.0:è®©å…¶ä»–ç”µè„‘å¯è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨
8000:ç«¯å£,å¦‚æœä¸è¯´æ˜,é»˜è®¤ä¸º8000
'''
```

å¯åŠ¨é¡¹ç›®åæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨çš„IPåŠç«¯å£è¿›è¡Œè®¿é—®äº† , å³åœ¨æµè§ˆå™¨è¾“å…¥`http://127.0.0.1:8000` 

![runserver](http://oux34p43l.bkt.clouddn.com/runserver.png?imageMogr2/blur/1x0/quality/75|watermark/2/text/bHlvbi55YW5nQHFxLmNvbQ==/font/YXBhcmFqaXRh/fontsize/560/fill/Izk0ODI4Mg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)

## åˆ›å»ºä¸€ä¸ªDjangoæ¨¡å‹  ğŸ€

Djangoè§„å®š , å¦‚æœè¦ä½¿ç”¨åº”ç”¨æ¨¡å‹ , å¿…é¡»è¦åˆ›å»ºä¸€ä¸ªapp

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºapp

```cmd
python manage.py startapp blog  - åŒæ ·åœ¨manage.pyæ‰€åœ¨ç›®å½•ä¸‹æ‰§è¡Œ
```

åˆ›å»ºå®Œæˆåå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ–‡ä»¶äº†

```python
blog
â”œâ”€â”€ migrations         # æ•°æ®åº“ç›¸å…³ç›®å½•
|   â””â”€â”€ __init__.py     
â”œâ”€â”€ __init__.py        
â”œâ”€â”€ admin.py           # adminåå°ç®¡ç†æ–‡ä»¶
â”œâ”€â”€ apps.py            # åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ models.py          # æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ tests.py           # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ views.py           # å¯¹æ•´ä¸ªç¨‹åºè¿›è¡Œé…ç½®
```

**PS : æˆ‘ä»¬æ¯åˆ›å»ºä¸€ä¸ªæ¨¡å‹ , éƒ½éœ€è¦åœ¨`settings.py` ä¸­æ·»åŠ é…ç½® , å¦‚ä¸‹æ‰€ç¤º** 

```python
# mysite\settings.py
"""æˆªå–æ–‡ä»¶ä¸­çš„ç‰‡æ®µ"""
# Application definition
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'blog',   # æ­¤è¡Œä¸ºæ·»åŠ çš„é…ç½®
]
```

## åŒæ­¥æ•°æ®åº“  ğŸ€

åœ¨åŒæ­¥æ•°æ®åº“ä¹‹å‰éœ€è¦å…ˆç”ŸæˆåŒæ­¥æ•°æ®åº“çš„è„šæœ¬ , ä¸€èˆ¬æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡å‹æ—¶è¿™ä¸€æ­¥éƒ½è‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº† , å¦‚æœæ²¡æœ‰ , åˆ™å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”ŸæˆåŒæ­¥æ•°æ®åº“çš„è„šæœ¬

```cmd
python manage.py makemigrations
```

è€Œåè¿›è¡ŒåŒæ­¥æ•°æ®åº“

```cmd
python manage.py migrate
```

## è®¿é—®admin  ğŸ€

django adminæ˜¯djangoæä¾›çš„ä¸€ä¸ªåå°ç®¡ç†é¡µé¢ , å¦‚æœæˆ‘ä»¬ä½¿ç”¨django adminåˆ™éœ€è¦æå‰åˆ›å»ºå¥½åå°ç®¡ç†å‘˜ (è¶…çº§ç”¨æˆ·) , ä»¥åŠurlçš„é…ç½®

åˆ›å»ºåå°ç®¡ç†å‘˜

```cmd
python manage.py createsuperuser
```

é…ç½®åå°ç®¡ç†url

```python
# mysite\urls.py
urlpatterns = [
    url(r'^admin/', admin.site.urls),
]
'''å½“ç„¶è¿™ä¸€æ­¥å®é™…ä¸Šæˆ‘ä»¬åˆ›å»ºDjangoé¡¹ç›®æ—¶å°±ä¸ºæˆ‘ä»¬è‡ªåŠ¨å®Œæˆäº†'''
```

äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥è®¿é—®adminäº† , å³æµè§ˆå™¨ä¸­è®¿é—®`http://127.0.0.0:8000/admin/` 

å…¶ä»–å‘½ä»¤å¦‚ä¸‹

```cmd
python manage.py flush          - æ¸…ç©ºæ•°æ®åº“
django-admin.py help startapp   - æŸ¥è¯¢æŸä¸ªå‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯
python manage.py shell          - å¯åŠ¨äº¤äº’ç•Œé¢
```

æœ¬ç¯‡ä»…ä»…å¯¹Djangoåšä¸€ä¸ªç®€å•çš„ä»‹ç» , è¯¦ç»†å†…å®¹è§åç»­æ–‡ç« 
